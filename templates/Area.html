
{% extends 'navbar.html' %}
{% load static %}
{% block content %}
<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Colorlib Templates">
    <meta name="author" content="Colorlib">
    <meta name="keywords" content="Colorlib Templates">

    <!-- Title Page-->


    <!-- Icons font CSS-->
<!--    <link href="{% static 'mdi-font/css/material-design-iconic-font.min.css' %}" rel="stylesheet" media="all">-->
<link href="{% static 'css/material-design-iconic-font.min.css' %}" rel="stylesheet" media="all">

    <link href="{% static 'font-awesome-4.7/css/font-awesome.min.css' %}" rel="stylesheet" media="all">
    <!-- Font special for pages-->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i" rel="stylesheet">

    <!-- Vendor CSS-->
    <link href="{% static 'css/select2.min.css' %}" rel="stylesheet" media="all">
    <link href="{% static 'vendor/datepicker/daterangepicker.css' %}" rel="stylesheet" media="all">
 <link href="{% static 'css/main.min.css' %}" rel="stylesheet" media="all">
    <!-- Main CSS-->
    <link href="{% static 'css/main.css' %}" rel="stylesheet" media="all">
<!--     <link href="{% static 'css/main.css' %}" rel="stylesheet" media="all">-->

<style>
    .comboclass{
height: 50px;
width:230px;
border-radius: 5px;
background-color: #eee;
justify-content: center;
text-align: center;
font-size: 16px;


}
.select option{
height: 50px;
width:100%;



}

.btnclass{
    display: flex;
    margin-left: 0px;
    margin-top: 40px;
    padding: 20px;
    justify-content: center;
    gap: 20px;
  }
  .btnregister, .btnclose, .btnclear{
    width:120px;
    height: 45px;
    border-radius: 10px;
    color: white;
    font-weight: bold;
  }
  .btnclear{
    background-color: rgb(57, 180, 214);
    
  }
  .btnregister{
    background-color: rgb(57, 214, 122);
  }
  .btnclose{
    background-color: red;
  }
.dtfield{
    margin-left: 30px;background-color: #6a656521;
    border-radius: 5px;
    min-width:150px ;
    min-height: 50px;
    padding: 10px;
}
.obfield{
    margin-left: 100px;background-color: #6a656521;
    border-radius: 5px;
    width: 250px;
    height: 50px;
    padding: 10px;
}
.input-group{
    min-width: 430px;
}
.taxdiv{
   
   
}
.taxmaindiv{
    margin-left: 30px;
}
@media only screen and (max-width: 600px) {
    .taxmaindiv{
    margin-left: 0px;
}
    .obfield{
    margin-left: 00px;background-color: #6a656521;
    border-radius: 5px;
   margin-top: 20px;
   margin-bottom: 20px;
    height: 50px;
    padding: 10px;
    width: 270px;
}
    .dtfield{
    margin-left: 20px;background-color: #6a656521;
    border-radius: 10px;
   min-height: 40px;
    margin-bottom: 20px;
    min-width: 170px;
}
.btnregister, .btnclose, .btnclear{
    width:80px;
    height: 35px;
    border-radius: 5px;
    color: white;
    font-weight: bold;
  }
  .btnclass{
    display: flex;
    margin-left: 0px;
    margin-top: 40px;
    padding: 20px;
    justify-content: center;
    gap: 20px;
  }



  .card {
    height: 100%;
    width: 100%;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background: #fff;
}

.card-5 {
  background: #fff;

  -webkit-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
  -webkit-box-shadow: 0px 8px 20px 0px rgba(0, 0, 0, 0.15);
  -moz-box-shadow: 0px 8px 20px 0px rgba(0, 0, 0, 0.15);
  box-shadow: 0px 8px 20px 0px rgba(0, 0, 0, 0.15);
}

.card-5 .card-heading {
  padding: 10px;
  background: #1a1a1a;
  -webkit-border-top-left-radius: 10px;
  -moz-border-radius-topleft: 10px;
  border-top-left-radius: 10px;
  -webkit-border-top-right-radius: 10px;
  -moz-border-radius-topright: 10px;
  border-top-right-radius: 10px;
}

.card-5 .card-body {
  padding:0px 10px 0px 10px;
  padding-bottom: 73px;
}
.page-wrapper{
    padding-top: 0px;
    padding: 0px;
}
.title {
  font-size: 17px;
  text-transform: uppercase;
  font-weight: bold;
  text-align: center;
  color: #fff;
}
.comboclass{
  height: 40px;
  width:130px;
  border-radius: 5px;
  background-color: #eee;
  text-align: center;;
}
.input-group{
    min-width: 300px;
    
}
.col-3, .col-9 {
        padding: 0px 4px;
    }
    .input-group-desc {
     margin-bottom: 4px; 
    }
    form{
        margin-left: 20px;
    }
    .col-5 {
    flex: 0 0 auto;
    width: 46.666667%;
}
.page-wrapper{
  height: 100vh;
}
.wrapper{
  height: 100%;
}
}
</style>
</head>

<body>

    <div class="page-wrapper bg-gra-03 " >
        <div  class="wrapper "  >
            <div class="card card-5" >
                <div class="card-heading">
                    <h3 style="text-align: center;min-height: 10px;color: #eee;">Stock Area</h3>
                </div>
                <div class="card-body">
                    <form method="POST" id="ledgerform">
                        <div class="row">
                        {% csrf_token %}
<div class="form-row">
<!--                            <div class="name">itemid</div>-->
                            <div class="value">
                                <div class="col-3">

                                    <input class="" id="dcode" name="dcode" style="border: 0px solid;font-size: 20px;background-color: white;font-weight: bold;" type="number" value="{{dcode}}" readonly>

                                </div>
                            </div>
                        </div>
                       
                        <div class="form-row m-b-10" >
                            <div class="name">Area Name</div>
                            <div class="value">
                                <div class="row row-refine">
                                    
                                    <div class="col-3">
                                        
                                        <div class="value">
                                            <div  class="input-group-desc">
                                                <input class="input--style-5" type="text" id="aname"  name="aname" required/>
                                                
                                            </div>
                                        </div>
                                        
                                        
                                    </div>
                                    
                                    <div class="col-5">
                                        <div class="input-group-desc" >
                                            <input class="input--style-5" type="text" name="address" id="address" placeholder="Address">

                                        </div>
                                    </div>
                                        
                                  
                                    </div>
                                </div>
                            </div>
                       


                            <div class="form-row "  >
                                <div class="name">City</div>
                                <div class="value">
                                    <div  class="row row-refine">
                                        
                                        <div class="col-3">
                                            
                                           
                                            <div class="value">
                                                <div class="input-group-desc">
                                                    <input class="input--style-5" type="text" id="city" name="city">
                                                </div>
                                            </div>
                                            
                                        </div>
                                       
                                        <div  class="col-5">
                                            <div class="input-group-desc" >
                                                <input class="input--style-5" type="text" name="pin" id="pin" placeholder="Pin code">
    
                                            </div>
                                        </div>
                                        
                                        
    
                                        </div>
                                    </div>
                                </div>





                                <div class="form-row m-b-10"  >
                                    <div class="name">Telephone</div>
                                    <div class="value">
                                        <div  class="row row-refine">
                                            
                                            <div class="col-3">
                                                
                                               
                                                <div class="value">
                                                    <div class="input-group-desc">
                                                        <input class="input--style-5" id="phone" type="text" name="phone"  >
                                                    </div>
                                                </div>
                                                
                                            </div>
                                           
                                            <div  class="col-5">
                                                <div class="input-group-desc" >
                                                    <input class="input--style-5" type="text" name="mobile" id="mobile" placeholder="Mobile">
        
                                                </div>
                                            </div>
                                            
                                            
        
                                            </div>
                                        </div>
                                    </div>



                               
                               
                                    <div class="form-row m-b-10">
                                        <div class="name">Contact Person</div>
                                        <div class="value">
                                            <div  class="row row-refine">
                                                
                                                <div class="col-3">
                                                    
                                                   
                                                    <div class="value">
                                                        <div class="input-group-desc">
                                                            <input class="input--style-5" type="text" id="cperson"  name="cperson">
                                                        </div>
                                                    </div>
                                                    
                                                </div>
                                               
                                                <div  class="col-5">
                                                    <div class="input-group-desc" >
                                                        <input class="input--style-5" type="text" name="regno" id="regno" placeholder="Regno">
            
                                                    </div>
                                                </div>
                                                
                                                
            
                                                </div>
                                            </div>

                                        </div>
                                        <div class="form-row m-b-10">
                                            <div class="name">License No</div>
                                            <div class="value">
                                                <div  class="row row-refine">
                                                    
                                                    <div class="col-3">
                                                        
                                                       
                                                        <div class="value">
                                                            <div class="input-group-desc">
                                                                <input class="input--style-5" type="text" id="license" name="license">
                                                            </div>
                                                        </div>
                                                        
                                                    </div>
                                                   
                                                    <div  class="col-5">
                                                        <div class="input-group-desc" >
                                                            <input class="input--style-5" type="text" name="description" id="desc"  placeholder="Description">
                
                                                        </div>
                                                    </div>
                                                    
                                                    
                
                                                    </div>
                                                </div>
                                            </div>


                           <div class="form-row">
                            
                        </div>




                          
          
                   

<div class="w3-container" style="margin-left: 0px;">
  <div class="w3-show-inline-block">
  <div class="btnclass">
    {% if type != 'edit' %}
                            <button class="btnclear" onclick="clearfn()" type="button" >Clear</button>
                            {% endif %}
    <button class="btnregister" type="button" onclick="savefn()" >Save</button>
    <button class="btnclose" type="button" onclick="closefn()"  >Close</button>
  </div>
  <input name="edittype" id="edittype" value="{{type}}" hidden="hidden"/>
  <input name="cmp" id="cmp" hidden="hidden"  value="{{user}}" >
  <input name="cmp" id="area" value="{{area}}" hidden="hidden"/>
  <input name="cmp" id="user" value="{{cuser}}" hidden="hidden"/>
  {% for i in messages %}
  <a>{{i}}</a>
  </div>
</div>


 {% endfor %}



</div>
                    </form>
                    
                </div>

                



            </div>
            
        </div>
       
    </div>


    <script src="{% static 'js/jquery.min.js' %}"></script>
  
    <script src="{% static 'js/select2.min.js' %}"></script>

    <script src="{% static 'js/global.js' %}"></script>

    <script>

document.addEventListener("keydown", keyDownTextField, false);
    function keyDownTextField(e) {
       
        if(event.key === 'F12') {
            event.preventDefault();
            document.getElementById('aname').focus()
        }
      if(event.key === 'F5') {
        event.preventDefault()
        if(document.getElementById('aname').value==''){
            alert("Please enter name")
        }
        else{
            const etype= document.getElementById("edittype").value;
            let company=document.getElementById('cmp').value;
        if(etype!='edit'){
    const query= document.getElementById("aname").value;
        
        fetch(`/validate/?query=${query}&type=${'area'}&company=${company}`)
            .then(response => response.json())
            .then(data => saveform(data.data,query)
            );
function saveform(dcodelen,dname){
    
    if(dcodelen==0){
        
            document.getElementById("ledgerform").submit();
        
                
            }
      else{
       
        alert("Area already exist")
      }
}
        }
        else{
            document.getElementById("ledgerform").submit();  
        }
        }
        
        
    
      } 
      if(event.key === 'Enter') {
    
        event.preventDefault()
      }
    
    }
    const previd={{ preid|safe }};
    let type=document.getElementById('edittype').value;
    let company=document.getElementById('cmp').value;
if(previd!='empt'){
   
    fetch(`/getarea/?query=${previd}&type=${type}&comp=${company}`)
      .then(response => response.json())
      .then(data => setarea(data.data));
        
}
function setarea(itemdata){
        itemdata.forEach((item,index) => {
        
        
        document.getElementById(`dcode`).value=previd;
        document.getElementById(`aname`).value=item.name;
        document.getElementById(`address`).value=item.address;
        document.getElementById(`city`).value=item.city;
       
        if (item.pin=='undefined' ){
            document.getElementById(`pin`).value=''

           
        }
        else{
            document.getElementById(`pin`).value=item.pin;
        }
       if(item.phone=='undefined'){
        document.getElementById(`phone`).value=''
        
       }
       else{
        document.getElementById(`phone`).value=item.phone;
        }
       if(item.mobile=='undefined' ){
        document.getElementById(`mobile`).value=''  ;

        
       }
       else{
        document.getElementById(`mobile`).value=item.mobile;
        }
        
      
       
        if(item.cperson=='undefined' ){
        document.getElementById(`cpserson`).value=''  ;

        
       }
       else{
        document.getElementById(`cperson`).value=item.cperson;
        }
        if(item.regno=='undefined' ){
        document.getElementById(`regno`).value=''  ;

        
       }
       else{
        document.getElementById(`regno`).value=item.regno;
        }
        if(item.license=='undefined' ){
        document.getElementById(`license`).value=''  ;

        
       }
       else{
        document.getElementById(`license`).value=item.license;
        }

        if(item.desc=='undefined' ){
        document.getElementById(`desc`).value=''  ;

        
       }
       else{
        document.getElementById(`desc`).value=item.desc;
        }
        
        });
    }

   
 function savefn(){
    if(document.getElementById('aname').value==''){
            alert("Please enter name")
        }
        else{
            const etype= document.getElementById("edittype").value;
            let company=document.getElementById('cmp').value;
        if(etype!='edit'){
    const query= document.getElementById("aname").value;
        
        fetch(`/validate/?query=${query}&type=${'area'}&company=${company}`)
            .then(response => response.json())
            .then(data => saveform(data.data,query)
            );
function saveform(dcodelen,dname){
    
    if(dcodelen==0){
        
            document.getElementById("ledgerform").submit();
        
                
            }
      else{
       
        alert("Area already exist")
      }
}
        }
        else{
            document.getElementById("ledgerform").submit();  
        }
        } 
 }     
 function clearfn(){

location.reload();
} 
 function closefn(){
    const typed=document.getElementById('edittype').value
   
if(typed=='edit'){
    
    window.close();
}
else{

    window.location.href ='/home';
}

}

    </script>
</body>

</html>

{% endblock%}